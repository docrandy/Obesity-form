<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patient Intake Form</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: auto;
            padding: 20px;
            background-color: #f4f7f8;
        }
        h2 {
            color: #333;
            margin-top: 20px;
        }
        label {
            display: block;
            margin: 10px 0 5px;
        }
        input, select, textarea {
            width: 100%;
            padding: 8px;
            margin-top: 4px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .form-section {
            padding: 15px;
            background-color: #fff;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .form-page {
            display: none;
        }
        .form-page.active {
            display: block;
        }
        .autocomplete-suggestions {
            border: 1px solid #ccc;
            max-height: 150px;
            overflow-y: auto;
        }
        .autocomplete-suggestions div {
            padding: 8px;
            cursor: pointer;
        }
        .autocomplete-suggestions div:hover {
            background-color: #e9e9e9;
        }
    </style>
</head>
<body>

<div class="form-container">
    <form id="intakeForm" onsubmit="submitForm(event)">
        <!-- Allergy Section -->
        <div class="form-section" id="allergy-section">
            <h2>Allergies</h2>
            
            <!-- Medication Allergy -->
            <label>Do you have any medication allergies?
                <select name="medicationAllergy" onchange="toggleAllergyFields('medication', this.value)">
                    <option value="">Select</option>
                    <option value="No">No</option>
                    <option value="Yes">Yes</option>
                </select>
            </label>
            <div id="medicationAllergyFields" style="display: none;">
                <label>Medication Name:
                    <input type="text" name="medicationAllergyName" oninput="autocomplete(this, medicationList)">
                </label>
                <label>Reaction: <input type="text" name="medicationReaction"></label>
                <div class="autocomplete-suggestions" id="medicationSuggestions"></div>
            </div>

            <!-- Food Allergy -->
            <label>Do you have any food allergies?
                <select name="foodAllergy" onchange="toggleAllergyFields('food', this.value)">
                    <option value="">Select</option>
                    <option value="No">No</option>
                    <option value="Yes">Yes</option>
                </select>
            </label>
            <div id="foodAllergyFields" style="display: none;">
                <label>Food Name:
                    <input type="text" name="foodAllergyName" oninput="autocomplete(this, foodList)">
                </label>
                <label>Reaction: <input type="text" name="foodReaction"></label>
                <div class="autocomplete-suggestions" id="foodSuggestions"></div>
            </div>

            <!-- Environmental Allergy -->
            <label>Do you have any environmental allergies?
                <select name="environmentalAllergy" onchange="toggleAllergyFields('environmental', this.value)">
                    <option value="">Select</option>
                    <option value="No">No</option>
                    <option value="Yes">Yes</option>
                </select>
            </label>
            <div id="environmentalAllergyFields" style="display: none;">
                <label>Environmental Factor:
                    <input type="text" name="environmentalAllergyName" oninput="autocomplete(this, environmentalList)">
                </label>
                <label>Reaction: <input type="text" name="environmentalReaction"></label>
                <div class="autocomplete-suggestions" id="environmentalSuggestions"></div>
            </div>
        </div>
    </form>
</div>

<script>
    // Sample lists of common items for auto-suggestion
    const medicationList = ["Aspirin", "Ibuprofen", "Penicillin", "Amoxicillin", "Codeine"];
    const foodList = ["Peanuts", "Shellfish", "Milk", "Eggs", "Soy"];
    const environmentalList = ["Pollen", "Dust", "Mold", "Pet Dander", "Smoke"];

    // Toggle Allergy Fields based on Yes/No response
    function toggleAllergyFields(type, value) {
        document.getElementById(type + 'AllergyFields').style.display = value === 'Yes' ? 'block' : 'none';
    }

    // Autocomplete function
    function autocomplete(input, list) {
        const suggestionsDiv = document.getElementById(input.name + 'Suggestions');
        suggestionsDiv.innerHTML = ''; // Clear previous suggestions
        const inputValue = input.value.toLowerCase();
        
        if (inputValue.length === 0) return;

        // Filter and display matching suggestions
        const filteredSuggestions = list.filter(item => item.toLowerCase().startsWith(inputValue));
        filteredSuggestions.forEach(suggestion => {
            const suggestionDiv = document.createElement('div');
            suggestionDiv.textContent = suggestion;
            suggestionDiv.onclick = () => {
                input.value = suggestion; // Set the input value to the clicked suggestion
                suggestionsDiv.innerHTML = ''; // Clear suggestions
            };
            suggestionsDiv.appendChild(suggestionDiv);
        });
    }
</script>

</body>
</html>
